-- phpMyAdmin SQL Dump
-- version 5.1.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Apr 29, 2024 at 11:58 AM
-- Server version: 10.11.7-MariaDB-cll-lve
-- PHP Version: 7.2.34

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `u421310157_emp_system`
--

-- --------------------------------------------------------

--
-- Table structure for table `clients`
--

CREATE TABLE `clients` (
  `id` int(11) NOT NULL,
  `employee_id` int(11) DEFAULT NULL,
  `client_name` varchar(255) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT current_timestamp(),
  `nationality` varchar(255) DEFAULT NULL,
  `phone_number` int(50) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `job_title` varchar(255) DEFAULT NULL,
  `office_discovery_method` varchar(255) DEFAULT NULL,
  `customer_credentials` text DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `clients`
--

INSERT INTO `clients` (`id`, `employee_id`, `client_name`, `created_at`, `nationality`, `phone_number`, `email`, `job_title`, `office_discovery_method`, `customer_credentials`) VALUES
(28, 13, 'محمد ', '2024-04-04 08:11:46', 'مصري', 22121221, 'nour@gmail.com', 'غير متوفر', 'مندوب بلال ', '[]'),
(29, 13, 'محمد صابر ', '2024-04-07 08:00:46', 'مصري ', 552476308, 'msaber22@yahoo.com', 'محاسب ', 'لوحده ', '[]'),
(30, 13, 'كريم صابر عمران ', '2024-04-07 08:02:02', 'مصري ', 552476308, 'kareim22@yahoo.com', 'محاسب ', 'لوحده ', '[]'),
(31, 16, 'محمد الهاجري', '2024-04-07 08:02:39', 'عماني', 2147483647, 'mhdhajri@gmail.com', 'شرطى في مركز شرطة البرشا', 'مندوب بلال', '[]'),
(32, 13, 'عبد الرحمن ', '2024-04-07 08:05:27', 'مصري ', 25555555, 'abdo12@gmail.com', 'مهندس', 'غير متوفر', '[]'),
(33, 13, 'عمر علي ', '2024-04-07 08:08:43', 'سوري', 2147483647, 'omar2@gmail.com', 'طيار', 'بلال ', '[]'),
(34, 13, 'عمر علي ', '2024-04-07 08:10:46', 'مصري ', 2545356, 'omar@gmail.com', 'طيار ', 'بلال ', '[]'),
(35, 13, 'مصطفي السيد', '2024-04-07 08:11:40', 'سوري ', 88787984, 'moustfa@yahoo.com', 'طيار ', 'بلال ', '[]'),
(36, 15, 'روبي نيلسون ', '2024-04-07 08:12:26', 'بريطانيا', 521689860, 'nelsonruby@hotmail.com', 'مدرس مدرسة ابتدائية ', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية \",\"username\":\"nelsonruby@hotmail.com\",\"password\":\"Nn@12345\"},{\"id\":2,\"websiteName\":\"محكمة اتحادية ، هوية رقمية \",\"username\":\"784196778270833 \",\"password\":\"784196778270833 \"}]'),
(38, 15, 'نويدا شميم صادق', '2024-04-07 08:17:40', 'باكستان ', 525836239, 'Nowedha27@gmail.com', 'كاتب ملفات ', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية \",\"username\":\"Nowedha27@gmail.com\",\"password\":\"Nn@12345\"},{\"id\":2,\"websiteName\":\"محكمة اتحادية ، هوية رقمية \",\"username\":\"784199270759287\",\"password\":\"\"}]'),
(39, 15, 'نور الدين ', '2024-04-07 08:28:22', 'مصري', 588891859, 'NORMM122@YAHOO.COM', '.', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية\",\"username\":\"78419940000000\",\"password\":\"nN@12345\"}]'),
(40, 13, 'رفيدة علي ', '2024-04-07 09:42:52', 'سودانية', 562608936, 'rfaida@yahoo.com', 'غير متوفر', 'بلال', '[]'),
(44, 13, 'حسن عبد المنعم ', '2024-04-14 06:19:54', 'مصري ', 2147483647, 'hassn@2024', 'مدير ', 'لوحدة', '[]'),
(45, 24, 'محمد علي ادريس محمد ', '2024-04-14 06:35:32', 'سوري', 562608936, 'rfyhlyjmh8@gmail.com', 'lعلاقات عامله ', 'بلال ', '[]'),
(46, 13, 'صلاح السيد', '2024-04-14 06:39:14', 'سوري', 1211111111, 'sallah@2024', 'سائق', 'بلال', '[]'),
(47, 15, 'سوم اوماكوب ليبريجا  ( يزن حديد ) ', '2024-04-14 07:08:49', 'الفلبين ', 527025818, 'prestige.health@hotmail.com', 'بدون', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية \",\"username\":\"prestige.health@hotmail.com\",\"password\":\"Nn@12345\"}]'),
(48, 24, 'رفيدة علي جمعة اسحاق ', '2024-04-14 07:12:13', 'سودنيه ', 562608936, 'rfydhlyjmh8@gmail.com', 'محاسب ', 'اقبال ', '[{\"id\":1,\"websiteName\":\"فتح بلاغ في شرطه عجمان \",\"username\":\"0000000\",\"password\":\"000000\"}]'),
(49, 13, 'محمد عبد اللطيف', '2024-04-14 07:57:58', 'مصري', 552809490, 'm@2024', 'غير متوفر', 'لوحده', '[]'),
(50, 24, 'حد امين المنير ', '2024-04-15 05:54:46', 'جزر القمر ', 589698908, 'hadamihe.mounir@gmail.com', 'موظف ', 'بلال ', '[]'),
(51, 24, 'سريجيش بوليدايل بافتيران ', '2024-04-15 11:53:12', 'هندي ', 554648485, 'geml.comHadamine.mounir@gmail.com', 'بائع', 'كستمر قديم ', '[]'),
(52, 16, 'بيسكاتو راي موهين ', '2024-04-17 06:51:38', 'بنجلاديش', 526742400, 'biskatu123@gmail.com', 'عامل', 'لوجده', '[]'),
(53, 16, 'سرفراز احمد محمد سرور', '2024-04-17 08:32:24', 'باكستان', 581045091, 'www.sarfrazahmad90641@gmail.com', 'عامل', 'لوجده', '[]'),
(54, 16, 'رقيب الاسلام شمس الحق ملا', '2024-04-17 12:15:14', 'بنجلاديش', 543041390, 'rhm732355@gmail.com', 'عامل', 'لوحده', '[]'),
(55, 16, 'علي اكبر شاه الحميد راوتير', '2024-04-18 06:48:18', 'هندي', 528808872, 'binsaqer8@gmail.com', 'عامل', 'مندوب اقبال', '[{\"id\":1,\"websiteName\":\"محكمة دبي\",\"username\":\"00\",\"password\":\"00\"}]'),
(56, 15, 'سامي ياسر توفيق اكبارية ', '2024-04-18 10:26:14', 'الاردن ', 505392433, '..@JMAIL.COM', 'مدير تنفيذي ', 'بدون مندوب ', '[]'),
(57, 15, 'سامي ياسر توفيق اكبارية ', '2024-04-19 06:32:36', 'الاردن ', 505392433, 'sami@gmail.com', 'مدير تنفيذي ', '.', '[]'),
(58, 16, 'ادموند امبير', '2024-04-19 07:43:17', 'غانا', 567934683, 'admond123@gmail.cim', 'عامل', 'لوحده', '[]'),
(73, 13, 'محمد محمد', '2024-04-22 05:05:24', 'سوري', 0, '00000000@yahoo.com', 'شريك', 'بلال ', '[]'),
(74, 16, 'ياسمين تيسير الشقير', '2024-04-22 09:47:08', 'سورية', 569057224, 'yassmin90@gmail.com', 'ربة منزل', 'لوحدها', '[]'),
(78, 16, 'ياسمين تيسير الشقير', '2024-04-22 11:13:00', 'سوريا', 569057224, 'yassmen9@gmail.com', 'ربة منزل', 'لوحدها', '[]'),
(80, 16, 'عويس خان', '2024-04-22 12:04:46', 'بنجلاديش', 521018463, 'wys67998@gmail.com', 'سائق', 'لوحده', '[]'),
(82, 16, 'نصرت بي بي', '2024-04-22 12:16:07', 'بنجلاديش', 566797553, 'ibrahimburarna@gmail.com', 'vfm lk.g', 'لوحدها', '[]'),
(96, 15, 'شرافيت علي عبد الحميد ', '2024-04-23 07:59:18', 'باكستان ', 568603212, '.......@gmail.com', '.', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية / هوية رقمية \",\"username\":\"784198716849199\",\"password\":\"784198716849199\"}]'),
(97, 16, 'عنايات محمد ابراهيم', '2024-04-23 11:38:59', 'بنجلاديش', 569948306, 'ALhikman@gmail.com', 'مدير', 'محمد سناء الله', '[]'),
(98, 16, 'محمد اشان ', '2024-04-23 11:46:06', 'بنجلاديش', 561399693, 'md8949431@gmail.com', 'عامل', 'لوجده', '[]'),
(100, 15, 'شاه محمد حيدر ', '2024-04-25 06:05:12', 'بنجلاديش ', 567697374, 'shahhmohamed62@gmail.com', '.', '.', '[]'),
(101, 24, 'ادريس محمد جماع ', '2024-04-25 06:07:44', 'بنقالي ', 587965412, 'ttytttt@gemil.com', 'بدون عمل ', 'بلال ', '[]'),
(107, 16, 'رشيد فاداكتيل حمزة فاداكتيل', '2024-04-25 06:44:07', 'هندي', 501104281, 'rasheedvadakkethil@gmail.com', 'عامل', 'مندوب بلال', '[]'),
(108, 15, 'محمد يوسف القاضي ', '2024-04-25 09:06:01', 'اردني ', 553890414, '0.......@gmail.com', '.', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية / هوية رقمية \",\"username\":\"0553890414\",\"password\":\"0553890414\"}]'),
(109, 15, 'ميساء ناجي محسن', '2024-04-25 10:20:14', 'العراق ', 526998005, 'maisaa@gmail.com', 'vfm lk.g ', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية / هوية رقمية \",\"username\":\"0526998005\",\"password\":\"0526998005\"}]'),
(110, 19, '123', '2024-04-25 10:32:37', '123', 123, 'asd@yahoo.com', '123', '123', '[]'),
(111, 13, 'محمود احمد ', '2024-04-25 10:56:24', 'سوداني ', 0, 'mohm@yahoo.com', 'غير متوفر ', 'مندوب خارجي ', '[]'),
(124, 16, 'كوثر محمد يوسف', '2024-04-26 05:40:41', 'بنجلاديش', 543894123, 'mdparbas5860@gmail.com', 'عامل', 'لوحده', '[]'),
(125, 24, 'ادريس للنقليات ', '2024-04-26 05:42:41', 'باكستاني / شركه ', 556387553, 'erwer@gemil.com', 'شركه ', 'عميل سابق ', '[]'),
(128, 13, 'صلاح السيد ', '2024-04-28 06:53:26', 'مصري ', 0, 'sallah@yahoo.com', 'سائق', 'لوحده', '[]'),
(129, 19, 'محمد عبدالرحيم محمد مكي ', '2024-04-28 07:26:42', 'سوداني ', 99999999, 'mohamedabdo2381998@gmail.com', 'مهندس برمجيات ', 'صديق ', '[]'),
(131, 19, 'محمد عبدالريحم محمد مكي', '2024-04-28 07:40:29', 'سوداني', 9999999, 'mohamedabdo281998@gmail.com', 'مهندس برمجيات', 'صديق ', '[]'),
(132, 15, 'محمد رضا جعفر ', '2024-04-28 07:49:02', 'سوداني', 2147483647, 'mohamedrida122@gmail.com', 'طباع', 'ميديا', '[]'),
(133, 25, 'عبدالله الشفيع ', '2024-04-28 07:58:11', 'سوداني', 2147483647, 'abdulaa@gmail.com', 'طباع', 'ميديا', '[]'),
(134, 25, 'محمد', '2024-04-28 08:02:56', 'هندي', 545856514, 'JGHSDGFB@GMAIL.COM', 'عامل', 'بلال', '[]'),
(135, 25, 'محمد نور الهدي ', '2024-04-28 08:07:48', 'بنغالي', 547904500, 'MYDS784@GMAIL.COM', 'عامل ', 'لايوجد ', '[]'),
(136, 15, 'سعد ربيع سعد بن سعد السويدي ', '2024-04-28 08:47:22', 'إماراتي ', 502555066, 'alsuwaidi62@gmail.com', '.', 'بسام', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية \",\"username\":\"alsuwaidi62@gmail.com\",\"password\":\"Nn@12345\"}]'),
(137, 13, 'مصطفي السيد ', '2024-04-28 09:15:52', 'مصري ', 22222222, 'mostfa@yahoo.com', 'مهندس ', 'بلال ', '[]'),
(138, 16, 'زليخة محمد حسن عبد الله', '2024-04-28 12:44:25', 'اماراتية', 503161127, 'Ali-alhashmiii@hotmail.com', 'l,/t', 'لوحده', '[]'),
(139, 25, 'محمد مامون الاسلام', '2024-04-29 06:36:26', 'بنغلاديش ', 562965678, 'alaminchy280@gmail.com', 'عامل', 'لايوجد', '[]'),
(140, 13, 'احمد رجب محمود ', '2024-04-29 07:18:38', 'مصري ', 555434241, 'AHMED@YAHOO', '.', 'لوحده ', '[]'),
(141, 15, 'حمدي جوهري ابوجوهري ', '2024-04-29 08:31:55', 'مصر', 508564200, '......0@gmail.com', '.', '.', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية / هوية رقمية \",\"username\":\"0508564200\",\"password\":\"0508564200\"}]'),
(142, 25, 'علي الكيدي', '2024-04-29 08:32:17', 'اماراتي', 564852333, 'refresh/re-su@gmail.com', 'موظف', 'لايوجد', '[]'),
(143, 15, 'جمال محمد اصيل محمد', '2024-04-29 08:39:49', 'باكستان', 506530480, 'jamal.jmparts@gmail.com', '.', '.', '[{\"id\":1,\"websiteName\":\"نيابة / هوية رقمية \",\"username\":\"784195883183212\",\"password\":\"784195883183212\"}]'),
(144, 16, 'محمد منير حسن ميا شيخ', '2024-04-29 09:00:51', 'بنجلاديش', 528203731, 'mdmoniehossan3731@gmail.com', 'شريك', 'محمد سناء الله', '[]'),
(145, 15, 'حميد عبدالله نور محمد ابوبكر ', '2024-04-29 11:30:06', 'إماراتي ', 563331999, 'humaid.abubakr1991@gmail.com', '.', 'بلال', '[{\"id\":1,\"websiteName\":\"محكمة اتحادية \",\"username\":\"humaid.abubakr1991@gmail.com\",\"password\":\"Nn@12345\"}]');

-- --------------------------------------------------------

--
-- Table structure for table `expenses`
--

CREATE TABLE `expenses` (
  `id` int(11) NOT NULL,
  `amount` int(11) NOT NULL,
  `expense_name` varchar(256) NOT NULL,
  `description` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

-- --------------------------------------------------------

--
-- Table structure for table `office_details`
--

CREATE TABLE `office_details` (
  `id` int(11) NOT NULL,
  `ar_office_name` varchar(256) DEFAULT NULL,
  `en_office_name` varchar(256) DEFAULT NULL,
  `ar_office_address` varchar(256) DEFAULT NULL,
  `en_office_address` varchar(256) DEFAULT NULL,
  `office_phone` varchar(100) DEFAULT NULL,
  `office_email` varchar(256) DEFAULT NULL,
  `office_tax_number` varchar(256) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `office_details`
--

INSERT INTO `office_details` (`id`, `ar_office_name`, `en_office_name`, `ar_office_address`, `en_office_address`, `office_phone`, `office_email`, `office_tax_number`) VALUES
(1, 'مكتب سستم الخدمات الالكترونية', 'Electronic services system', 'مدينة عجمان، شارع الشيخ عمار -  مقابل دار القضاء', 'Ajman City, Sheikh Ammar Street - opposite the Courthouse', '+971 56 308 1753', 'systemtyping22@gmail.com', '');

-- --------------------------------------------------------

--
-- Table structure for table `personal_employee_info`
--

CREATE TABLE `personal_employee_info` (
  `id` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT current_timestamp(),
  `full_name` varchar(255) DEFAULT NULL,
  `nationality` varchar(255) DEFAULT NULL,
  `start_working_date` date DEFAULT NULL,
  `final_working_date` date DEFAULT NULL,
  `contract_end_date` date DEFAULT NULL,
  `residency_end_date` date DEFAULT NULL,
  `personal_id_number` int(11) DEFAULT NULL,
  `passport_id_number` varchar(255) DEFAULT NULL,
  `salary_amount` decimal(10,2) DEFAULT NULL,
  `comission_percentage` int(3) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `personal_employee_info`
--

INSERT INTO `personal_employee_info` (`id`, `created_at`, `full_name`, `nationality`, `start_working_date`, `final_working_date`, `contract_end_date`, `residency_end_date`, `personal_id_number`, `passport_id_number`, `salary_amount`, `comission_percentage`) VALUES
(13, '2024-04-04 08:04:57', 'محمد صابر', 'مصري', '2023-01-01', '2024-04-01', '2024-04-01', '2024-04-01', 2147483647, 'I563633444', '1500.00', 0),
(15, '2024-04-04 11:00:48', 'بسام حسن', 'مصري', '2024-04-04', '2025-04-04', '2024-04-04', '2024-04-04', 2147483647, 'a', '2500.00', 0),
(16, '2024-04-04 11:05:26', 'محمد فهد ', 'سوري', '2024-04-04', '2025-04-04', '2024-04-04', '2025-04-04', 1, '1', '0.00', 50),
(19, '2024-04-14 14:10:09', 'manager', 'مصري', '2024-04-14', '2100-04-14', '2100-04-14', '2100-04-14', 1234567890, '1234567890', '10000.00', 0),
(24, '2024-04-21 13:28:14', 'روفيده علي', 'سودانية', '2024-04-04', '2025-04-04', '2025-04-04', '2025-04-04', 1, '1', '2000.00', 0),
(25, '2024-04-28 07:56:30', 'معاذ جمال ', 'مصري', '2024-04-01', '2024-04-30', '2024-04-01', '2024-04-01', 2147483647, '05000000000', '4998.00', 28);

--
-- Triggers `personal_employee_info`
--
DELIMITER $$
CREATE TRIGGER `prevent_employee_deletion` BEFORE DELETE ON `personal_employee_info` FOR EACH ROW BEGIN
    DECLARE employee_count INT;

    -- Check if there are associated clients, services, or receipts
    SELECT COUNT(*) INTO employee_count
    FROM (
        SELECT id FROM clients WHERE employee_id = OLD.id
        UNION ALL
        SELECT id FROM services WHERE employee_id = OLD.id
        UNION ALL
        SELECT id FROM receipts WHERE employee_id = OLD.id
    ) AS associated_records;

    -- If associated records exist, prevent deletion
    IF employee_count > 0 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Cannot delete employee with associated records';
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `prevent_personal_employee_deletion` BEFORE DELETE ON `personal_employee_info` FOR EACH ROW BEGIN 
    DECLARE employee_count INT; 
    
    -- Check if there are associated clients, services, or receipts in personal_employee_info
    SELECT COUNT(*) INTO employee_count 
    FROM (
        SELECT id FROM clients WHERE employee_id = OLD.id 
        UNION ALL 
        SELECT id FROM services WHERE employee_id = OLD.id 
        UNION ALL 
        SELECT id FROM receipts WHERE employee_id = OLD.id 
    ) AS associated_records; 
    
    -- If associated records exist, prevent deletion 
    IF employee_count > 0 THEN 
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Cannot delete employee with associated records'; 
    END IF; 
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `receipts`
--

CREATE TABLE `receipts` (
  `id` int(11) NOT NULL,
  `service_id` int(11) DEFAULT NULL,
  `client_id` int(11) DEFAULT NULL,
  `employee_id` int(11) DEFAULT NULL,
  `service_paid_amount` decimal(10,2) DEFAULT NULL,
  `service_remaining_amount` decimal(10,0) NOT NULL,
  `created_at` timestamp NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `receipts`
--

INSERT INTO `receipts` (`id`, `service_id`, `client_id`, `employee_id`, `service_paid_amount`, `service_remaining_amount`, `created_at`) VALUES
(42, 51, 34, 13, '50.00', '0', '2024-04-14 06:34:51'),
(43, 51, 34, 13, '50.00', '0', '2024-04-14 06:34:59'),
(44, 51, 34, 13, '50.00', '0', '2024-04-14 06:35:27'),
(53, 59, 50, 24, '50.00', '0', '2024-04-15 06:02:58'),
(58, 61, 51, 24, '50.00', '0', '2024-04-15 12:30:41'),
(59, 62, 50, 24, '200.00', '0', '2024-04-18 10:04:17'),
(64, 67, 56, 15, '250.00', '0', '2024-04-22 10:56:50'),
(65, 68, 74, 16, '200.00', '0', '2024-04-22 11:21:55'),
(66, 73, 97, 16, '200.00', '200', '2024-04-23 11:41:16'),
(67, 74, 98, 16, '65.00', '0', '2024-04-23 11:50:25'),
(68, 76, 100, 15, '50.00', '0', '2024-04-25 06:07:35'),
(69, 77, 107, 16, '150.00', '0', '2024-04-25 06:50:01'),
(70, 78, 97, 16, '225.00', '0', '2024-04-25 10:17:30'),
(71, 79, 109, 15, '100.00', '0', '2024-04-25 10:22:37'),
(72, 82, 111, 13, '250.00', '250', '2024-04-25 10:59:45'),
(73, 85, 135, 25, '100.00', '0', '2024-04-28 08:36:23'),
(74, 86, 48, 25, '250.00', '250', '2024-04-28 08:43:13'),
(75, 84, 128, 13, '150.00', '0', '2024-04-28 09:10:52'),
(76, 88, 137, 13, '150.00', '0', '2024-04-28 09:23:56'),
(77, 89, 138, 16, '100.00', '0', '2024-04-28 12:47:09'),
(78, 90, 139, 25, '30.00', '0', '2024-04-29 06:42:24'),
(79, 91, 140, 13, '50.00', '0', '2024-04-29 07:23:33'),
(80, 92, 141, 15, '90.00', '50', '2024-04-29 08:34:50'),
(81, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:06'),
(82, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:08'),
(83, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:09'),
(84, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:09'),
(85, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:10'),
(86, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:10'),
(87, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:10'),
(88, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:10'),
(89, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:40'),
(90, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:43'),
(91, 93, 142, 25, '50.00', '0', '2024-04-29 08:40:43'),
(92, 94, 143, 15, '125.00', '0', '2024-04-29 08:41:41'),
(93, 95, 144, 16, '150.00', '0', '2024-04-29 09:03:45'),
(94, 93, 142, 25, '50.00', '0', '2024-04-29 09:12:11'),
(95, 93, 142, 25, '50.00', '0', '2024-04-29 09:12:15'),
(96, 93, 142, 25, '50.00', '0', '2024-04-29 09:12:55'),
(97, 93, 142, 25, '50.00', '0', '2024-04-29 09:13:01'),
(98, 87, 136, 15, '700.00', '0', '2024-04-29 11:25:58'),
(99, 98, 145, 15, '200.00', '0', '2024-04-29 11:35:37'),
(100, 98, 145, 15, '200.00', '0', '2024-04-29 11:35:45');

-- --------------------------------------------------------

--
-- Table structure for table `services`
--

CREATE TABLE `services` (
  `id` int(11) NOT NULL,
  `employee_id` int(11) NOT NULL,
  `client_id` int(11) NOT NULL,
  `representative_id` int(11) DEFAULT NULL,
  `service_name` varchar(255) NOT NULL,
  `service_total_price` int(11) NOT NULL,
  `service_payment_status` varchar(20) NOT NULL DEFAULT 'unpaid',
  `service_status` varchar(20) NOT NULL DEFAULT 'not-started',
  `created_at` varchar(255) NOT NULL,
  `ends_at` varchar(255) NOT NULL,
  `service_details` text DEFAULT NULL,
  `sub_services` text DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `services`
--

INSERT INTO `services` (`id`, `employee_id`, `client_id`, `representative_id`, `service_name`, `service_total_price`, `service_payment_status`, `service_status`, `created_at`, `ends_at`, `service_details`, `sub_services`) VALUES
(27, 15, 36, 0, 'تنفيذ عمالي ', 200, 'paid', 'in-process', '2024-04-07 00:00:00.000', '2024-04-14', '.تم تقديم طلب الصيغة التنفيذية من خلال موقع المحكمة ، والافادة بتقديم الطلب لوزارة الموارد البشرية \nتم تقديم طلب الصيغة التنفيذية من خلال وزارة الموارد البشرية ، وتمت الافادة بانتهاء العمل على الطلب ، دون وجود ختم الصيغة التنفيذية ', '[{\"id\":1,\"service_details\":\"تم تقديم طلب الصيغة التنفيذية وارفاق رد الموارد البشرية بشأن الحصول على الصيغة التنفيذية من خلال محكمة التنفيذ المدنية \",\"service_date\":\"2024-04-14\"}]'),
(34, 13, 40, 0, 'تشييك الطلبات', 150, 'unpaid', 'not-started', '2024-04-07 00:00:00.000', '2024-04-10 00:00:00.000', 'تشييك الطلبات', NULL),
(35, 13, 40, 0, 'تشييك الطلبات', 150, 'unpaid', 'not-started', '2024-04-07 00:00:00.000', '2024-04-10 00:00:00.000', 'تشييك الطلبات', NULL),
(51, 13, 34, 0, 'طلب ايداع مبلغ في التنفيذ ', 150, 'partially-paid', 'completed', '2024-04-14 00:00:00.000', '2024-04-15', 'تم تقديم الطلب وسيتم المراجعة غدا', NULL),
(59, 24, 50, 0, 'تقديم طلب للدعم الفني ', 50, 'partially-paid', 'in-process', '2024-04-15 00:00:00.000', '2024-02-04', 'تقديم طلب للدعم الفني ', NULL),
(61, 24, 51, 0, 'اجابه علي استبيان ', 50, 'partially-paid', 'in-process', '2024-04-15 00:00:00.000', '2024-12-06 00:00:00.000', 'ورده اسئله استبيان شرطه وتم الاجابه علي ', NULL),
(62, 24, 50, 0, 'انشاء دعوي لدي التوجه الاسري ', 200, 'partially-paid', 'in-process', '2024-04-18 00:00:00.000', '2024-02-08 00:00:00.000', 'تم صياغه المذكره وارفاقها علي النظام ', NULL),
(67, 15, 56, 0, 'قيد منازعة توجيه اسري', 250, 'partially-paid', 'in-process', '2024-04-18 00:00:00.000', '2024-06-30 00:00:00.000', 'كتابة لائحة المنازعة \nقيد لائحة المنازعة \nمتابعة سير المنازعة وارسال لينك الجلسة ', NULL),
(68, 16, 74, 0, 'فتح بلاغ نيابة عامة', 200, 'partially-paid', 'completed', '2024-04-22 00:00:00.000', '2024-04-22', 'فتح بلاغ نصب واحتيال الالكتروني-شركات تدوال  وتسجيل البلاغ على موقع النيابة العامة', NULL),
(69, 16, 80, 0, 'فتح ملف تنفيذ', 150, 'unpaid', 'not-started', '2024-04-22 00:00:00.000', '0024-04-22 00:00:00.000', 'اعداد لائحة التنفيذ وتسجيلعا على موقع المحكمة', NULL),
(70, 16, 80, 0, 'tjp lgt jktd`', 150, 'partially-paid', 'completed', '2024-04-22 00:00:00.000', '2024-04-22 00:00:00.000', 'فتح ملف تنفيذ عمالي', NULL),
(71, 16, 82, 0, 'طباعه رسالة منع من السفر', 30, 'unpaid', 'completed', '2024-04-22 00:00:00.000', '2024-04-22 00:00:00.000', 'طباعه رسالة التحريات بمنع المنفذ ضده من السفر', NULL),
(72, 15, 96, 0, 'كتابة مذكرة ', 0, 'unpaid', 'not-started', '2024-04-23 00:00:00.000', '2024-06-03 00:00:00.000', 'سبق وتم كتابة المذكرة ، وبانتظار التقرير لكتابة مذكرة ', NULL),
(73, 16, 97, 0, 'قيد دعوى تعويض', 400, 'partially-paid', 'in-process', '2024-04-23 00:00:00.000', '2024-04-23 00:00:00.000', 'اعداد لائحة دعوى تعويض منافسة غير مشروعه وتسجيل الدعوى', NULL),
(74, 16, 98, 0, 'طلب غلق ملف وشهادة بغلق الملف', 65, 'partially-paid', 'in-process', '2024-04-23 00:00:00.000', '2024-04-23 00:00:00.000', 'طلب شهادة بغلق ملف تنفيذ رقم 467/2023 عمالي', NULL),
(75, 16, 98, 0, 'شهادة بغلق ملف تنفيذ', 65, 'unpaid', 'not-started', '2024-04-23 00:00:00.000', '2024-04-23 00:00:00.000', 'طلب شهادة بغلق ملف تنفيذ 467/2023 عمالي', NULL),
(76, 15, 100, 0, 'طلب استلام جواز سفر ', 50, 'partially-paid', 'in-process', '2024-04-25 00:00:00.000', '2024-04-28 00:00:00.000', 'تقديم طلب استلام جواز سفر ', NULL),
(77, 16, 107, 0, 'فتح بلاغ جنائي', 150, 'partially-paid', 'completed', '2024-04-25 00:00:00.000', '2024-04-25 00:00:00.000', 'فتح بلاغ نصب واحتيال وتسجليه على الموقع', NULL),
(78, 16, 97, 0, 'استكمال تسجيل نزاع مدني', 225, 'partially-paid', 'completed', '2024-04-25 00:00:00.000', '2024-04-25 00:00:00.000', 'استكمال تسجيل النزاع المدني على موقع المحكمة', NULL),
(79, 15, 109, 0, 'قيد امر على عريضة بالنظام ', 100, 'partially-paid', 'in-process', '2024-04-25 00:00:00.000', '2024-04-28', 'قيد الامر بالنظام ', NULL),
(80, 13, 73, 0, 'طلب ', 100, 'unpaid', 'not-started', '2024-04-25 00:00:00.000', '2024-04-26 00:00:00.000', 'تم تقديم الطلب ', NULL),
(81, 13, 73, 0, 'طلب تقسيط ', 200, 'unpaid', 'not-started', '2024-04-25 00:00:00.000', '2024-04-25 00:00:00.000', 'تم تقديم الطلب وفي انتظار الاشعار ', NULL),
(82, 13, 111, 0, 'فتح ملف تنفيذ ', 500, 'partially-paid', 'in-process', '2024-04-25 00:00:00.000', '2024-04-26 00:00:00.000', 'تم فتح الملف بنجاح ', NULL),
(83, 16, 124, 0, 'تقديم طلبات في ملف تنفيذ مدني', 100, 'unpaid', 'not-started', '2024-04-26 00:00:00.000', '2024-04-25 00:00:00.000', 'تقديم طلب استعلام عن الارصدة وطلب ضبط واحضار في ملف تنفيذ رقم 7403/2023', NULL),
(84, 13, 128, 0, 'طلب دفع غرامه نيابة عامة', 150, 'partially-paid', 'not-started', '2024-04-28 00:00:00.000', '2024-04-29 00:00:00.000', 'تم التدفع', NULL),
(85, 25, 135, 0, 'التيابه العامه - استلم جواز', 100, 'partially-paid', 'in-process', '2024-04-28 00:00:00.000', '2024-02-22 00:00:00.000', 'تم تقديم طلب استلام جواز داخل تطبيق النيابه العامه ', NULL),
(86, 25, 134, 0, 'دفع مرورية', 500, 'partially-paid', 'in-process', '2024-04-28 00:00:00.000', '2024-02-22 00:00:00.000', 'تم دفع مخالفات مروروية من سستم وزارة الداخلية ', NULL),
(87, 15, 136, 0, 'فتح ملف تنفيذ ', 700, 'partially-paid', 'in-process', '2024-04-30 00:00:00.000', '2024-07-30 00:00:00.000', 'كتابة لائحة التنفيذ\nقيد التنفيذ بالنظام \nمتابعة التنفيذ وتقديم الطلبات ', NULL),
(88, 13, 137, 0, 'عمل يوزر', 150, 'partially-paid', 'in-process', '2024-04-28 00:00:00.000', '2024-05-10 00:00:00.000', 'تم عمل اليوزر ', NULL),
(89, 16, 138, 0, 'طلب استمرارية زواج', 100, 'partially-paid', 'completed', '2024-04-28 00:00:00.000', '2024-04-28 00:00:00.000', 'تقديم طلب استمرارية زواج', NULL),
(90, 25, 139, 0, 'تشيك علي سستم البوابة الموحدة', 30, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '2024-05-16 00:00:00.000', 'تم التشك علي سستم المحكمة لعمل طلب استلام اموال من التنفيذ ولم يتم الايداع ', NULL),
(91, 13, 140, 0, 'طلب يداع مبلغ في التنفيذ ', 50, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '2024-04-29 00:00:00.000', 'تم تقديم الطلب ', NULL),
(92, 15, 141, 0, 'امر على عريضة ', 140, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '2024-05-05', 'كتابة لائحة امر \nارفاق الامر بالنظام ', '[]'),
(93, 25, 142, 0, 'دفع مخالفات مرورية ', 75, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '2024-04-30', 'تم دفع مخالفات مرورية للعميل و اخذ عمولة 50 درهم', NULL),
(94, 15, 143, 0, 'بلاغ نيابة ', 125, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '0004-04-30 00:00:00.000', 'قيد بلاغ بالنيابة ', NULL),
(95, 16, 144, 0, 'بلاغ فقدان شيكات', 150, 'partially-paid', 'completed', '2024-04-29', '2024-04-29', 'فتح بلاغ فقدان شيكات على موقع وزارة الداخلية', NULL),
(96, 15, 143, 0, 'بلاغ نيابة ', 125, 'unpaid', 'not-started', '2024-04-29 00:00:00.000', '2024-05-02 00:00:00.000', 'قيد بلاغ بالنظام ', NULL),
(97, 15, 145, 0, 'منازعة توجيه اسري ', 200, 'unpaid', 'not-started', '2024-04-29 00:00:00.000', '2024-05-02 00:00:00.000', 'كتابة لائحة المنازعة \nقيد المنازعة بالنظام \nمتابعة المنازعة ', NULL),
(98, 15, 145, 0, 'قيد منازعة توجيه اسري', 200, 'partially-paid', 'in-process', '2024-04-29 00:00:00.000', '2024-05-02 00:00:00.000', 'كتابة المنازعة \nقيد المنازعة \nمتابعة المنازعة ', NULL);

-- --------------------------------------------------------

--
-- Table structure for table `system_employee_info`
--

CREATE TABLE `system_employee_info` (
  `id` int(11) NOT NULL,
  `employee_id` int(11) DEFAULT NULL,
  `username` varchar(255) DEFAULT NULL,
  `password` varchar(255) DEFAULT NULL,
  `role` varchar(20) NOT NULL DEFAULT 'employee',
  `login_time` timestamp NULL DEFAULT NULL,
  `logout_time` timestamp NULL DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_general_ci;

--
-- Dumping data for table `system_employee_info`
--

INSERT INTO `system_employee_info` (`id`, `employee_id`, `username`, `password`, `role`, `login_time`, `logout_time`) VALUES
(254, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', NULL, NULL),
(255, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:10:46', '2024-04-14 14:11:08'),
(256, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:11:27', '2024-04-14 14:13:05'),
(257, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:20:37', NULL),
(258, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:22:24', NULL),
(259, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:22:25', '2024-04-14 14:26:43'),
(260, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:31:27', NULL),
(261, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:33:16', NULL),
(262, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 14:33:31', '2024-04-14 14:34:07'),
(263, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 15:10:27', '2024-04-14 15:39:29'),
(264, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-14 15:56:58', '2024-04-14 17:35:01'),
(268, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-15 12:18:05', '2024-04-20 09:00:30'),
(281, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 09:03:47', '2024-04-20 09:05:35'),
(282, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 09:11:28', '2024-04-20 09:11:45'),
(283, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 09:11:56', '2024-04-20 15:38:51'),
(284, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 15:42:00', '2024-04-20 15:42:11'),
(285, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 15:42:38', '2024-04-20 15:44:21'),
(286, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 15:51:35', '2024-04-20 16:18:46'),
(287, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 16:18:54', '2024-04-20 17:14:44'),
(288, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-20 17:15:03', NULL),
(289, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:02:50', '2024-04-21 09:09:50'),
(403, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:33:02', '2024-04-21 09:34:31'),
(405, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:43:23', '2024-04-21 09:43:30'),
(406, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:46:56', '2024-04-21 09:47:09'),
(408, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:53:02', '2024-04-21 09:53:08'),
(410, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 09:54:12', '2024-04-21 10:18:15'),
(412, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 10:20:03', '2024-04-21 10:20:34'),
(414, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 10:21:34', '2024-04-21 10:22:03'),
(416, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 10:22:22', '2024-04-21 10:23:12'),
(418, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 10:23:57', NULL),
(419, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 11:43:19', '2024-04-21 12:12:55'),
(420, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:13:33', '2024-04-21 12:17:39'),
(421, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:18:44', '2024-04-21 12:19:41'),
(424, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:20:09', '2024-04-21 12:21:23'),
(425, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:21:27', '2024-04-21 12:33:45'),
(482, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:34:21', '2024-04-21 12:47:59'),
(484, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 12:48:32', '2024-04-21 13:11:33'),
(490, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:14:11', NULL),
(491, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:14:31', '2024-04-21 13:16:35'),
(492, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:27:43', '2024-04-21 13:28:16'),
(495, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:37:36', '2024-04-21 13:37:44'),
(498, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:45:24', '2024-04-21 13:46:11'),
(500, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 13:46:36', '2024-04-21 13:48:16'),
(502, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:06:25', NULL),
(504, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:08:57', '2024-04-21 14:18:06'),
(512, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:19:16', NULL),
(513, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:19:42', NULL),
(514, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:20:28', '2024-04-21 14:20:31'),
(515, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:20:36', '2024-04-21 14:25:55'),
(517, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:26:04', '2024-04-21 14:26:17'),
(519, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-21 14:26:57', '2024-04-22 09:03:38'),
(522, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-21 14:31:09', '2024-04-22 04:03:42'),
(523, 15, 'bsam', 'a26d87821744625c88d7aa8ce65961ad5e08a889d2108d972c78908b8987ae3a', 'employee', NULL, NULL),
(524, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-21 14:37:32', '2024-04-21 14:37:43'),
(525, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-21 06:15:15', '2024-04-21 06:20:39'),
(526, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-22 04:01:30', NULL),
(527, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-22 04:03:58', '2024-04-22 11:00:09'),
(528, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-22 05:08:38', NULL),
(529, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-22 09:48:26', NULL),
(530, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-22 10:54:51', '2024-04-22 10:57:05'),
(531, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-22 11:02:00', NULL),
(532, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-22 11:02:38', '2024-04-22 11:30:22'),
(533, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-22 11:04:28', '2024-04-22 11:10:21'),
(534, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-22 11:10:36', '2024-04-22 11:22:18'),
(535, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-22 11:30:15', '2024-04-22 12:47:14'),
(536, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-22 11:30:41', '2024-04-22 11:53:14'),
(537, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-22 12:08:17', '2024-04-23 04:12:21'),
(538, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-22 12:34:42', '2024-04-22 13:16:41'),
(539, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-23 04:06:21', '2024-04-23 12:47:34'),
(540, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-23 04:12:34', '2024-04-23 12:54:26'),
(541, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-24 03:57:45', '2024-04-24 12:57:05'),
(542, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-24 04:11:20', '2024-04-28 06:26:30'),
(543, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-24 04:15:54', '2024-04-25 04:04:15'),
(544, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-25 04:03:28', '2024-04-25 13:02:41'),
(545, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-25 04:04:49', '2024-04-25 12:46:46'),
(546, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-25 10:31:38', '2024-04-25 17:26:47'),
(547, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-25 17:27:06', '2024-04-25 17:47:32'),
(548, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-25 17:47:39', NULL),
(549, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-26 04:09:10', NULL),
(550, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-26 04:15:55', NULL),
(551, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-26 04:15:55', NULL),
(552, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-26 04:15:56', '2024-04-26 11:50:04'),
(553, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-26 05:44:24', NULL),
(554, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-26 05:45:37', NULL),
(555, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-26 05:48:27', '2024-04-26 07:58:08'),
(556, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-26 09:12:16', '2024-04-28 07:29:53'),
(557, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-26 11:50:10', NULL),
(558, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-26 11:52:11', '2024-04-26 11:59:09'),
(559, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-28 06:01:06', '2024-04-28 11:59:19'),
(560, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-28 06:13:16', '2024-04-28 12:51:27'),
(561, 15, 'bsam', 'a26d87821744625c88d7aa8ce65961ad5e08a889d2108d972c78908b8987ae3a', 'employee', '2024-04-28 06:16:03', NULL),
(562, 24, 'rofe', '220d11f0e1c7c44f0340177fb31523f1bc4a677a3a6470044284b817e4592d06', 'employee', '2024-04-28 06:26:59', NULL),
(563, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 07:37:58', '2024-04-28 07:47:41'),
(564, 15, 'bsam', 'a26d87821744625c88d7aa8ce65961ad5e08a889d2108d972c78908b8987ae3a', 'employee', '2024-04-28 07:48:02', '2024-04-28 12:00:10'),
(565, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 07:54:35', '2024-04-28 07:56:42'),
(566, 25, 'muaz', 'c4c769fca7a2c6aa6aac10b7dab2a8bdf42152573788e065fb9eaaab5437b49e', 'employee', NULL, NULL),
(567, 25, 'muaz', 'c4c769fca7a2c6aa6aac10b7dab2a8bdf42152573788e065fb9eaaab5437b49e', 'employee', '2024-04-28 07:56:52', '2024-04-28 08:01:21'),
(568, 25, 'muaz', 'c4c769fca7a2c6aa6aac10b7dab2a8bdf42152573788e065fb9eaaab5437b49e', 'employee', '2024-04-28 08:01:23', '2024-04-28 08:38:33'),
(569, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 08:01:32', '2024-04-28 08:03:28'),
(570, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 08:05:02', '2024-04-28 08:07:23'),
(571, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 08:07:40', '2024-04-28 08:09:24'),
(572, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-28 08:10:00', NULL),
(573, 25, 'muaz', 'c4c769fca7a2c6aa6aac10b7dab2a8bdf42152573788e065fb9eaaab5437b49e', 'employee', '2024-04-28 08:38:47', NULL),
(574, 16, 'mosk', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'employee', '2024-04-29 04:07:03', NULL),
(575, 13, 'mohamedsaber', 'f319a920622e9fb6b979412494d8bf7958bab797ee4df507732837d6054ae69e', 'accountant', '2024-04-29 04:10:10', NULL),
(576, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-29 09:15:20', NULL),
(577, 19, 'manager', '561f4a2db712b76899bc98894403fc3fe79da5e84e33d8b52e1a29aa7677605e', 'admin', '2024-04-29 09:15:20', '2024-04-29 09:31:50');

--
-- Triggers `system_employee_info`
--
DELIMITER $$
CREATE TRIGGER `prevent_employee_deletion_from_system_employee_info` BEFORE DELETE ON `system_employee_info` FOR EACH ROW BEGIN 
    DECLARE employee_count INT; 
    
    -- Check if there are associated clients, services, or receipts in both tables
    SELECT COUNT(*) INTO employee_count 
    FROM (
        SELECT id FROM clients WHERE employee_id = OLD.id 
        UNION ALL 
        SELECT id FROM services WHERE employee_id = OLD.id 
        UNION ALL 
        SELECT id FROM receipts WHERE employee_id = OLD.id 
        UNION ALL
        SELECT id FROM personal_employee_info WHERE id = OLD.employee_id -- Ensure employee ID matches in personal_employee_info
    ) AS associated_records; 
    
    -- If associated records exist, prevent deletion 
    IF employee_count > 0 THEN 
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Cannot delete employee with associated records'; 
    END IF; 
END
$$
DELIMITER ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `clients`
--
ALTER TABLE `clients`
  ADD PRIMARY KEY (`id`),
  ADD KEY `employer_id` (`employee_id`);

--
-- Indexes for table `expenses`
--
ALTER TABLE `expenses`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `office_details`
--
ALTER TABLE `office_details`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `personal_employee_info`
--
ALTER TABLE `personal_employee_info`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `receipts`
--
ALTER TABLE `receipts`
  ADD PRIMARY KEY (`id`),
  ADD KEY `client_id` (`client_id`),
  ADD KEY `fk_service_id` (`service_id`),
  ADD KEY `fk_employee_id_receipts` (`employee_id`);

--
-- Indexes for table `services`
--
ALTER TABLE `services`
  ADD PRIMARY KEY (`id`),
  ADD KEY `employer_id` (`employee_id`),
  ADD KEY `client_id` (`client_id`);

--
-- Indexes for table `system_employee_info`
--
ALTER TABLE `system_employee_info`
  ADD PRIMARY KEY (`id`),
  ADD KEY `employee_id` (`employee_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `clients`
--
ALTER TABLE `clients`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=146;

--
-- AUTO_INCREMENT for table `expenses`
--
ALTER TABLE `expenses`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=15;

--
-- AUTO_INCREMENT for table `office_details`
--
ALTER TABLE `office_details`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `personal_employee_info`
--
ALTER TABLE `personal_employee_info`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=26;

--
-- AUTO_INCREMENT for table `receipts`
--
ALTER TABLE `receipts`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=101;

--
-- AUTO_INCREMENT for table `services`
--
ALTER TABLE `services`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=99;

--
-- AUTO_INCREMENT for table `system_employee_info`
--
ALTER TABLE `system_employee_info`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=578;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `clients`
--
ALTER TABLE `clients`
  ADD CONSTRAINT `clients_ibfk_1` FOREIGN KEY (`employee_id`) REFERENCES `personal_employee_info` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `receipts`
--
ALTER TABLE `receipts`
  ADD CONSTRAINT `fk_employee_id` FOREIGN KEY (`employee_id`) REFERENCES `personal_employee_info` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_employee_id_receipts` FOREIGN KEY (`employee_id`) REFERENCES `clients` (`employee_id`) ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_service_id` FOREIGN KEY (`service_id`) REFERENCES `services` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `receipts_ibfk_1` FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `services`
--
ALTER TABLE `services`
  ADD CONSTRAINT `fk_employee_id_services` FOREIGN KEY (`employee_id`) REFERENCES `clients` (`employee_id`) ON UPDATE CASCADE,
  ADD CONSTRAINT `services_ibfk_1` FOREIGN KEY (`employee_id`) REFERENCES `personal_employee_info` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `services_ibfk_2` FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `system_employee_info`
--
ALTER TABLE `system_employee_info`
  ADD CONSTRAINT `system_employee_info_ibfk_1` FOREIGN KEY (`employee_id`) REFERENCES `personal_employee_info` (`id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
